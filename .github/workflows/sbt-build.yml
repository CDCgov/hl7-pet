name: CI/CD Pipeline for SBT
on:
 push:
   branches:
     - maven-central  # Trigger on push to the main branch
jobs:
 build:
   runs-on: ubuntu-latest
   needs: build
   steps:
   - name: Checkout repository
     uses: actions/checkout@v2
   - name: Set up JDK 11
     uses: actions/setup-java@v2
     with:
       distribution: 'adopt'
       java-version: '11'
   - name: Cache SBT dependencies
     uses: actions/cache@v2
     with:
       path: |
         ~/.ivy2/cache
         ~/.sbt
       key: ${{ runner.os }}-sbt-${{ hashFiles('**/build.sbt') }}
       restore-keys: |
         ${{ runner.os }}-sbt-
   - name: Publish to Maven Central
     run: sbt +publish
     env:
       SONATYPE_USERNAME: ${{ secrets.SONATYPE_USERNAME }}
       SONATYPE_PASSWORD: ${{ secrets.SONATYPE_PASSWORD }}
       PGP_SECRET: ${{ secrets.PGP_SECRET }}
       PGP_PASSPHRASE: ${{ secrets.PGP_PASSPHRASE }}